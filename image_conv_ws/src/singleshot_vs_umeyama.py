#!/usr/bin/env python3

import pandas as pd
from io import StringIO
import matplotlib.pyplot as plt

# Original data
data = """
id tx ty tz roll pitch yaw scale
7  0.4706866092464028 -0.14101306080466386 0.24417201414868703 179.0978725073328 -1.588744778375213 -73.50592548133689 0.49686421710846645
8  0.5576757522644104 -0.03970415786003848 0.24098086438383204 176.7969025663354 2.8612558216978132 -160.92565479192865 0.5005085758857591
9  0.5237805411714832 -0.08605231768841956 0.24893821138167674 -179.86793813558717 -4.896300734195108 -103.59362737338924 0.4970124067662044
10  0.49301883100846633 -0.17310713908269448 0.24697447529565328 179.29707869019163 -7.15967551567719 -92.64942193015925 0.5003835546927767
11  0.5225884529531303 -0.13499795734066738 0.2404898914843904 -152.28778664356147 -5.248703826181884 -85.4440007433857 0.4968359836023289
12  0.5342621657083393 -0.13051887553188152 0.4209150953554393 -179.88246428022276 -3.68960324084715 -73.08780988204416 0.5036189667604873
"""

# New data
new_data = """
id tx ty tz roll pitch yaw
7 0.48431634566504667 -0.1379539823864737 0.2484580360776743 74.00045388807914 -1.5164204367406136 -179.0835387581251
8 0.5607189088527263 -0.04300577537851806 0.2415371236271626 165.05406748654116 -0.432161523396115 -175.18631057142642
9 0.5314753094338411 -0.07952311697505213 0.24735561386027133 94.8740049343999 -5.165559254276175 -178.7868474889089
10 0.4891850310352831 -0.17264915265698463 0.24983720976526322 88.76025843289179 -7.3352949444016815 -178.76049900994852
11 0.5256406380675198 -0.13443844921835713 0.24301202935977176 89.4543885015454 -7.931866503980346 -179.28640411847687
12 0.5352307220697797 -0.129729908011598 0.41844505324177333 90.48067423090002 -5.75071393307617 -179.0792618241081
"""

# Convert both strings of data into pandas DataFrames
data_io = pd.read_csv(StringIO(data), sep="\s+")

new_data_io = pd.read_csv(StringIO(new_data), sep="\s+")

# Plot each component in separate graphs
components = ['tx', 'ty', 'tz', 'roll', 'pitch', 'yaw']


i = 0 

for component in components:

    if i == 6: break 
    
    plt.figure(figsize=(10, 6))  # Create a new figure for each component
    plt.plot(data_io['id'], data_io[component]-new_data_io[component], marker='o', linestyle='-')
    plt.title(f'{component} diff per bag file')
    plt.xlabel('Bag file ID')
    plt.ylabel(f'{component} diff')
    plt.grid(True)  # Adding grid for better readability
    plt.show()  # Display the current figure before moving to the next one